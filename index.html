<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bangladesh Medicine Management System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>
    <style>
        :root {
            --primary: #006a4e;
            --secondary: #f42a41;
            --accent: #e67e22;
            --light: #f5f9fc;
            --dark: #2c3e50;
            --success: #27ae60;
            --warning: #f39c12;
            --danger: #e74c3c;
            --gray: #95a5a6;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f0f4f8;
            color: #333;
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), #004d38);
            color: white;
            padding: 15px 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo img {
            height: 50px;
        }
        
        .logo h1 {
            font-size: 1.8rem;
            font-weight: 600;
        }
        
        .logo span {
            color: var(--accent);
        }
        
        .nav-controls {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .search-box {
            position: relative;
            width: 300px;
        }
        
        .search-box input {
            width: 100%;
            padding: 10px 15px 10px 40px;
            border: none;
            border-radius: 50px;
            font-size: 1rem;
            background: rgba(255,255,255,0.9);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .search-box i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--dark);
        }
        
        .user-controls {
            display: flex;
            gap: 15px;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: var(--accent);
            color: white;
        }
        
        .btn-outline {
            background: transparent;
            border: 2px solid white;
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 25px;
            padding: 25px 0;
        }
        
        .sidebar {
            background: white;
            border-radius: 15px;
            padding: 25px 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            height: fit-content;
        }
        
        .sidebar-title {
            padding: 0 25px 15px;
            border-bottom: 1px solid #eee;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        .sidebar-menu {
            list-style: none;
        }
        
        .sidebar-menu li {
            padding: 12px 25px;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .sidebar-menu li.active {
            background: rgba(0,106,78,0.1);
            border-left: 4px solid var(--primary);
            font-weight: 600;
            color: var(--primary);
        }
        
        .sidebar-menu li:hover:not(.active) {
            background: #f8f9fa;
        }
        
        .dashboard {
            display: grid;
            gap: 25px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .stat-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            display: flex;
            flex-direction: column;
            position: relative;
        }
        
        .stat-card .title {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
            color: var(--gray);
        }
        
        .stat-card .value {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .stat-card .change {
            display: flex;
            align-items: center;
            gap: 5px;
            color: var(--success);
            font-weight: 600;
        }
        
        .stat-card .change.down {
            color: var(--danger);
        }
        
        .stat-card i {
            font-size: 2.5rem;
            color: rgba(0,106,78,0.2);
            position: absolute;
            right: 20px;
            top: 20px;
        }
        
        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .card-title {
            font-size: 1.5rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .action-bar {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .action-btn {
            padding: 8px 15px;
            background: #f8f9fa;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .action-btn:hover {
            background: #e9ecef;
        }
        
        .filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 20px;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
        }
        
        .filter-group label {
            font-weight: 600;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }
        
        .filter-group select, .filter-group input {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            background: white;
        }
        
        .table-container {
            overflow-x: auto;
        }
        
        .medicine-table {
            width: 100%;
            border-collapse: collapse;
            min-width: 1000px;
        }
        
        .medicine-table th {
            background-color: #f8f9fa;
            text-align: left;
            padding: 15px;
            font-weight: 600;
            color: var(--dark);
            border-bottom: 2px solid #eee;
        }
        
        .medicine-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
        }
        
        .medicine-table tr:hover {
            background-color: #f8f9fa;
        }
        
        .status-badge {
            padding: 5px 10px;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .status-prescription {
            background: rgba(231, 76, 60, 0.1);
            color: var(--danger);
        }
        
        .status-otc {
            background: rgba(39, 174, 96, 0.1);
            color: var(--success);
        }
        
        .low-stock {
            color: var(--danger);
            font-weight: 600;
        }
        
        .expiring-soon {
            background-color: #fff3cd;
        }
        
        .expired {
            background-color: #f8d7da;
        }
        
        .chart-container {
            height: 300px;
            margin-top: 20px;
        }
        
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
        }
        
        .notification-list {
            list-style: none;
        }
        
        .notification-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
            display: flex;
            gap: 15px;
        }
        
        .notification-item:last-child {
            border-bottom: none;
        }
        
        .notification-icon {
            background: rgba(0,106,78,0.1);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
        }
        
        .notification-content h4 {
            margin-bottom: 5px;
        }
        
        .notification-content p {
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        .notification-warning .notification-icon {
            background: rgba(243, 156, 18, 0.1);
            color: var(--warning);
        }
        
        .notification-danger .notification-icon {
            background: rgba(231, 76, 60, 0.1);
            color: var(--danger);
        }
        
        footer {
            background: var(--dark);
            color: white;
            padding: 25px 0;
            margin-top: 40px;
        }
        
        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .footer-links {
            display: flex;
            gap: 20px;
        }
        
        .footer-links a {
            color: #ddd;
            text-decoration: none;
            transition: color 0.3s ease;
        }
        
        .footer-links a:hover {
            color: white;
        }
        
        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: white;
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--dark);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-top: 20px;
        }
        
        .btn-cancel {
            background: #e9ecef;
            color: var(--dark);
        }
        
        .btn-save {
            background: var(--primary);
            color: white;
        }
        
        /* Scanner modal */
        .scanner-container {
            width: 100%;
            height: 300px;
            background: #333;
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .scanner-placeholder {
            color: white;
            text-align: center;
        }
        
        /* Tabs */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .tab {
            padding: 10px 20px;
            background: #e9ecef;
            border-radius: 8px;
            cursor: pointer;
        }
        
        .tab.active {
            background: var(--primary);
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Patient list */
        .patient-list {
            list-style: none;
        }
        
        .patient-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .patient-actions {
            display: flex;
            gap: 10px;
        }
        
        @media (max-width: 992px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .grid-2 {
                grid-template-columns: 1fr;
            }
            
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            
            .search-box {
                width: 100%;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .filters {
                grid-template-columns: 1fr;
            }
            
            .action-bar {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-pills fa-2x"></i>
                    <h1>Bangladesh <span>Medicine Manager</span></h1>
                </div>
                
                <div class="nav-controls">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="search" placeholder="Search medicines...">
                    </div>
                    
                    <div class="user-controls">
                        <button class="btn btn-outline" id="notifications-btn">
                            <i class="fas fa-bell"></i>
                            <span class="notification-count">3</span>
                        </button>
                        <button class="btn btn-outline" id="user-btn">
                            <i class="fas fa-user"></i> Admin
                        </button>
                        <button class="btn btn-primary" id="logout-btn">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>
    
    <div class="container">
        <div class="main-content">
            <div class="sidebar">
                <div class="sidebar-title">
                    <i class="fas fa-bars"></i> Navigation
                </div>
                <ul class="sidebar-menu">
                    <li class="active" data-tab="dashboard"><i class="fas fa-home"></i> Dashboard</li>
                    <li data-tab="inventory"><i class="fas fa-capsules"></i> Medicine Inventory</li>
                    <li data-tab="patients"><i class="fas fa-file-prescription"></i> Patients & Prescriptions</li>
                    <li data-tab="sales"><i class="fas fa-chart-line"></i> Sales Analytics</li>
                    <li data-tab="loan"><i class="fas fa-exchange-alt"></i> Loan & Return</li>
                    <li data-tab="settings"><i class="fas fa-cog"></i> Settings</li>
                </ul>
            </div>
            
            <!-- Tab Container -->
            <div class="tab-container">
                <!-- Dashboard Tab -->
                <div class="dashboard tab-content active" id="dashboard-tab">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="title">
                                <span>Total Medicines</span>
                                <i class="fas fa-pills"></i>
                            </div>
                            <div class="value" id="total-medicines">0</div>
                            <div class="change">
                                <i class="fas fa-arrow-up"></i> 12.5% from last month
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="title">
                                <span>Prescription Medicines</span>
                                <i class="fas fa-file-prescription"></i>
                            </div>
                            <div class="value" id="prescription-count">0</div>
                            <div class="change">
                                <i class="fas fa-arrow-up"></i> 8.3% from last month
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="title">
                                <span>OTC Medicines</span>
                                <i class="fas fa-capsules"></i>
                            </div>
                            <div class="value" id="otc-count">0</div>
                            <div class="change">
                                <i class="fas fa-arrow-up"></i> 5.7% from last month
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="title">
                                <span>Companies</span>
                                <i class="fas fa-industry"></i>
                            </div>
                            <div class="value" id="company-count">0</div>
                            <div class="change">
                                <i class="fas fa-arrow-up"></i> 3.2% from last month
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid-2">
                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-title"><i class="fas fa-chart-pie"></i> Medicine Distribution</h2>
                            </div>
                            <div class="chart-container">
                                <canvas id="categoryChart"></canvas>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-title"><i class="fas fa-exclamation-triangle"></i> Expiry Notifications</h2>
                            </div>
                            <ul class="notification-list" id="expiry-notifications">
                                <!-- Will be populated by JS -->
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- Inventory Tab -->
                <div class="dashboard tab-content" id="inventory-tab">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title"><i class="fas fa-capsules"></i> Medicine Inventory</h2>
                            <div class="action-bar">
                                <div class="action-btn" id="export-csv">
                                    <i class="fas fa-file-export"></i> Export CSV
                                </div>
                                <div class="action-btn" id="import-csv">
                                    <i class="fas fa-file-import"></i> Import CSV
                                </div>
                                <div class="action-btn" id="scan-barcode">
                                    <i class="fas fa-barcode"></i> Scan Barcode
                                </div>
                                <div class="action-btn" id="add-medicine">
                                    <i class="fas fa-plus"></i> Add Medicine
                                </div>
                            </div>
                        </div>
                        
                        <div class="filters">
                            <div class="filter-group">
                                <label for="company">Company</label>
                                <select id="company">
                                    <option value="">All Companies</option>
                                    <!-- Will be populated by JS -->
                                </select>
                            </div>
                            <div class="filter-group">
                                <label for="form">Form</label>
                                <select id="form">
                                    <option value="">All Forms</option>
                                    <option value="Tablet">Tablet</option>
                                    <option value="Capsule">Capsule</option>
                                    <option value="Injection">Injection</option>
                                    <option value="Syrup">Syrup</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label for="status">Status</label>
                                <select id="status">
                                    <option value="">All Status</option>
                                    <option value="Prescription">Prescription</option>
                                    <option value="Over-the-counter">Over-the-counter</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label for="stock">Stock Level</label>
                                <select id="stock">
                                    <option value="">All Stock</option>
                                    <option value="low">Low Stock</option>
                                    <option value="critical">Critical Stock</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="table-container">
                            <table class="medicine-table">
                                <thead>
                                    <tr>
                                        <th>Brand</th>
                                        <th>Generic</th>
                                        <th>Strength</th>
                                        <th>Form</th>
                                        <th>Company</th>
                                        <th>Price (৳)</th>
                                        <th>Status</th>
                                        <th>Stock</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="medicine-list">
                                    <!-- Will be populated by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Patients Tab -->
                <div class="dashboard tab-content" id="patients-tab">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title"><i class="fas fa-user-injured"></i> Patient Management</h2>
                            <div class="action-bar">
                                <div class="action-btn" id="add-patient">
                                    <i class="fas fa-plus"></i> Add Patient
                                </div>
                                <div class="action-btn" id="upload-prescription">
                                    <i class="fas fa-file-upload"></i> Upload Prescription
                                </div>
                            </div>
                        </div>
                        
                        <div class="filters">
                            <div class="filter-group">
                                <label for="patient-search">Search Patients</label>
                                <input type="text" id="patient-search" placeholder="Search by name or phone...">
                            </div>
                        </div>
                        
                        <div class="table-container">
                            <table class="medicine-table">
                                <thead>
                                    <tr>
                                        <th>Patient ID</th>
                                        <th>Name</th>
                                        <th>Phone</th>
                                        <th>Age</th>
                                        <th>Last Visit</th>
                                        <th>Prescriptions</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="patient-list">
                                    <!-- Will be populated by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Sales Tab -->
                <div class="dashboard tab-content" id="sales-tab">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title"><i class="fas fa-chart-line"></i> Sales Analytics</h2>
                            <div class="action-bar">
                                <div class="action-btn" id="daily-sales">
                                    <i class="fas fa-calendar-day"></i> Daily
                                </div>
                                <div class="action-btn" id="monthly-sales">
                                    <i class="fas fa-calendar-alt"></i> Monthly
                                </div>
                            </div>
                        </div>
                        
                        <div class="chart-container" style="height: 400px;">
                            <canvas id="salesChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title"><i class="fas fa-file-invoice"></i> Recent Sales</h2>
                        </div>
                        
                        <div class="table-container">
                            <table class="medicine-table">
                                <thead>
                                    <tr>
                                        <th>Invoice #</th>
                                        <th>Date</th>
                                        <th>Customer</th>
                                        <th>Items</th>
                                        <th>Total (৳)</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody id="sales-list">
                                    <!-- Will be populated by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Loan & Return Tab -->
                <div class="dashboard tab-content" id="loan-tab">
                    <div class="tabs">
                        <div class="tab active" data-loan-tab="loans">Loans</div>
                        <div class="tab" data-loan-tab="returns">Returns</div>
                    </div>
                    
                    <div class="loan-content active" id="loans-tab">
                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-title"><i class="fas fa-hand-holding-usd"></i> Loan Management</h2>
                                <div class="action-bar">
                                    <div class="action-btn" id="add-loan">
                                        <i class="fas fa-plus"></i> New Loan
                                    </div>
                                </div>
                            </div>
                            
                            <div class="table-container">
                                <table class="medicine-table">
                                    <thead>
                                        <tr>
                                            <th>Loan ID</th>
                                            <th>Customer</th>
                                            <th>Issue Date</th>
                                            <th>Due Date</th>
                                            <th>Items</th>
                                            <th>Amount (৳)</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="loan-list">
                                        <!-- Will be populated by JS -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    
                    <div class="loan-content" id="returns-tab">
                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-title"><i class="fas fa-undo"></i> Return Management</h2>
                            </div>
                            
                            <div class="table-container">
                                <table class="medicine-table">
                                    <thead>
                                        <tr>
                                            <th>Return ID</th>
                                            <th>Customer</th>
                                            <th>Return Date</th>
                                            <th>Items</th>
                                            <th>Amount (৳)</th>
                                            <th>Reason</th>
                                        </tr>
                                    </thead>
                                    <tbody id="return-list">
                                        <!-- Will be populated by JS -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Settings Tab -->
                <div class="dashboard tab-content" id="settings-tab">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title"><i class="fas fa-cog"></i> System Settings</h2>
                        </div>
                        
                        <div class="form-group">
                            <label for="language">Language</label>
                            <select id="language">
                                <option value="en">English</option>
                                <option value="bn">Bangla (বাংলা)</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="currency">Currency</label>
                            <select id="currency">
                                <option value="BDT">Bangladeshi Taka (৳)</option>
                                <option value="USD">US Dollar ($)</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="expiry-alert">Expiry Alert Days</label>
                            <input type="number" id="expiry-alert" value="30">
                        </div>
                        
                        <div class="form-group">
                            <label for="low-stock">Low Stock Threshold</label>
                            <input type="number" id="low-stock" value="10">
                        </div>
                        
                        <div class="form-group">
                            <label for="critical-stock">Critical Stock Threshold</label>
                            <input type="number" id="critical-stock" value="5">
                        </div>
                        
                        <div class="modal-footer">
                            <button class="btn btn-cancel">Cancel</button>
                            <button class="btn btn-save">Save Settings</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="copyright">
                    &copy; 2023 Bangladesh Medicine Management System
                </div>
                <div class="footer-links">
                    <a href="#">Privacy Policy</a>
                    <a href="#">Terms of Service</a>
                    <a href="#">Help Center</a>
                    <a href="#">Contact Us</a>
                </div>
            </div>
        </div>
    </footer>
    
    <!-- Medicine Modal -->
    <div class="modal" id="medicine-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-medicine-title">Add New Medicine</h2>
                <button class="close-modal">&times;</button>
            </div>
            <form id="medicine-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="brand">Brand Name</label>
                        <input type="text" id="brand" required>
                    </div>
                    <div class="form-group">
                        <label for="generic">Generic Name</label>
                        <input type="text" id="generic" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="strength">Strength</label>
                        <input type="text" id="strength" required>
                    </div>
                    <div class="form-group">
                        <label for="form">Form</label>
                        <select id="form" required>
                            <option value="">Select Form</option>
                            <option value="Tablet">Tablet</option>
                            <option value="Capsule">Capsule</option>
                            <option value="Injection">Injection</option>
                            <option value="Syrup">Syrup</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="company">Company</label>
                        <input type="text" id="company" required>
                    </div>
                    <div class="form-group">
                        <label for="price">Price (৳)</label>
                        <input type="number" id="price" step="0.01" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="stock">Stock Quantity</label>
                        <input type="number" id="stock" required>
                    </div>
                    <div class="form-group">
                        <label for="status">Status</label>
                        <select id="status" required>
                            <option value="Prescription">Prescription</option>
                            <option value="Over-the-counter">Over-the-counter</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="expiry">Expiry Date</label>
                    <input type="date" id="expiry" required>
                </div>
                
                <div class="form-group">
                    <label for="batch">Batch ID</label>
                    <input type="text" id="batch" required>
                </div>
                
                <div class="form-group">
                    <label for="uses">Uses</label>
                    <textarea id="uses" rows="3"></textarea>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-cancel">Cancel</button>
                    <button type="submit" class="btn btn-save">Save Medicine</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Patient Modal -->
    <div class="modal" id="patient-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-patient-title">Add New Patient</h2>
                <button class="close-modal">&times;</button>
            </div>
            <form id="patient-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="patient-name">Full Name</label>
                        <input type="text" id="patient-name" required>
                    </div>
                    <div class="form-group">
                        <label for="patient-phone">Phone Number</label>
                        <input type="tel" id="patient-phone" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="patient-age">Age</label>
                        <input type="number" id="patient-age" required>
                    </div>
                    <div class="form-group">
                        <label for="patient-gender">Gender</label>
                        <select id="patient-gender" required>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="patient-address">Address</label>
                    <textarea id="patient-address" rows="2"></textarea>
                </div>
                
                <div class="form-group">
                    <label for="patient-history">Medical History</label>
                    <textarea id="patient-history" rows="3"></textarea>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-cancel">Cancel</button>
                    <button type="submit" class="btn btn-save">Save Patient</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Scanner Modal -->
    <div class="modal" id="scanner-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Barcode Scanner</h2>
                <button class="close-modal">&times;</button>
            </div>
            
            <div class="scanner-container">
                <div class="scanner-placeholder">
                    <i class="fas fa-camera fa-3x"></i>
                    <p>Scanner will activate here</p>
                </div>
            </div>
            
            <div class="form-group">
                <label for="manual-barcode">Or enter barcode manually</label>
                <input type="text" id="manual-barcode" placeholder="Enter barcode number">
            </div>
            
            <div class="modal-footer">
                <button type="button" class="btn btn-cancel">Cancel</button>
                <button type="button" class="btn btn-save" id="scan-confirm">Confirm</button>
            </div>
        </div>
    </div>
    
    <!-- Prescription Upload Modal -->
    <div class="modal" id="prescription-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Upload Prescription</h2>
                <button class="close-modal">&times;</button>
            </div>
            
            <div class="form-group">
                <label for="select-patient">Select Patient</label>
                <select id="select-patient">
                    <option value="">Select a patient</option>
                    <!-- Will be populated by JS -->
                </select>
            </div>
            
            <div class="form-group">
                <label for="prescription-file">Upload File</label>
                <input type="file" id="prescription-file" accept=".pdf,.jpg,.png">
            </div>
            
            <div class="form-group">
                <label for="prescription-date">Prescription Date</label>
                <input type="date" id="prescription-date" required>
            </div>
            
            <div class="form-group">
                <label for="prescription-doctor">Doctor Name</label>
                <input type="text" id="prescription-doctor">
            </div>
            
            <div class="modal-footer">
                <button type="button" class="btn btn-cancel">Cancel</button>
                <button type="button" class="btn btn-save" id="upload-prescription-btn">Upload</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize medicine data
        let medicineData = [
          {
            "brand": "Fusid",
            "generic": "Cetirizine",
            "strength": "10 mg",
            "form": "Injection",
            "company": "Renata Limited",
            "price": 30.11,
            "uses": "Used for common health issues.",
            "dosage": "As prescribed by physician",
            "status": "Prescription"
          },
          {
            "brand": "Losectil",
            "generic": "Cefixime",
            "strength": "100 mg",
            "form": "Injection",
            "company": "Square Pharmaceuticals",
            "price": 27.94,
            "uses": "Used for common health issues.",
            "dosage": "As prescribed by physician",
            "status": "Prescription"
          },
          {
            "brand": "Zolair",
            "generic": "Cefixime",
            "strength": "5 mg",
            "form": "Capsule",
            "company": "ACI Limited",
            "price": 30.32,
            "uses": "Used for common health issues.",
            "dosage": "As prescribed by physician",
            "status": "Over-the-counter"
          },
          {
            "brand": "Zerodol",
            "generic": "Ranitidine",
            "strength": "50 mg",
            "form": "Syrup",
            "company": "Aristopharma",
            "price": 24.68,
            "uses": "Used for common health issues.",
            "dosage": "As prescribed by physician",
            "status": "Over-the-counter"
          },
          {
            "brand": "Fusid",
            "generic": "Metformin",
            "strength": "250 mg",
            "form": "Syrup",
            "company": "Renata Limited",
            "price": 9.46,
            "uses": "Used for common health issues.",
            "dosage": "As prescribed by physician",
            "status": "Over-the-counter"
          }
        ];

        // Add inventory data to medicines
        medicineData.forEach(med => {
            med.stock = Math.floor(Math.random() * 100);
            const expiryDate = new Date();
            expiryDate.setMonth(expiryDate.getMonth() + Math.floor(Math.random() * 24) + 1);
            med.expiry = expiryDate.toISOString().split('T')[0];
            med.batchId = `${med.company.substring(0, 3)}-${Math.floor(1000 + Math.random() * 9000)}`;
        });

        // Sample patient data
        let patients = [
            { id: 1, name: "Abdul Rahman", phone: "01712345678", age: 45, lastVisit: "2023-06-10", prescriptions: 3 },
            { id: 2, name: "Fatima Begum", phone: "01887654321", age: 32, lastVisit: "2023-06-12", prescriptions: 1 },
            { id: 3, name: "Mohammad Ali", phone: "01911223344", age: 67, lastVisit: "2023-05-28", prescriptions: 5 }
        ];

        // Sample sales data
        let sales = [
            { id: "INV-001", date: "2023-06-15", customer: "Abdul Rahman", items: 3, total: 125.75, status: "Paid" },
            { id: "INV-002", date: "2023-06-14", customer: "Fatima Begum", items: 2, total: 85.50, status: "Paid" },
            { id: "INV-003", date: "2023-06-13", customer: "Mohammad Ali", items: 5, total: 210.25, status: "Pending" }
        ];

        // Sample loan data
        let loans = [
            { id: "LN-001", customer: "Abdul Rahman", issueDate: "2023-06-01", dueDate: "2023-07-01", items: 2, amount: 150.25, status: "Active" },
            { id: "LN-002", customer: "Mohammad Ali", issueDate: "2023-05-15", dueDate: "2023-06-15", items: 1, amount: 75.50, status: "Overdue" }
        ];

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Render initial data
            renderMedicineList(medicineData);
            updateStatistics(medicineData);
            initCharts(medicineData);
            setupFilters(medicineData);
            renderPatientList(patients);
            renderSalesList(sales);
            renderLoanList(loans);
            updateExpiryNotifications(medicineData);
            
            // Setup event listeners
            setupEventListeners();
        });

        // Render medicine list
        function renderMedicineList(medicines) {
            const container = document.getElementById('medicine-list');
            if (!container) {
                console.error("Medicine list container not found");
                return;
            }
            
            container.innerHTML = '';
            
            if (medicines.length === 0) {
                container.innerHTML = '<tr><td colspan="9" style="text-align: center;">No medicines found</td></tr>';
                return;
            }
            
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            medicines.forEach(med => {
                const row = document.createElement('tr');
                
                // Calculate days until expiry
                const expiryDate = new Date(med.expiry);
                const timeDiff = expiryDate.getTime() - today.getTime();
                const daysUntilExpiry = Math.ceil(timeDiff / (1000 * 3600 * 24));
                
                // Apply warning classes
                if (daysUntilExpiry <= 30) {
                    row.classList.add('expiring-soon');
                }
                if (daysUntilExpiry < 0) {
                    row.classList.add('expired');
                }
                if (med.stock < 5) {
                    row.classList.add('low-stock');
                }
                
                row.innerHTML = `
                    <td>${med.brand}</td>
                    <td>${med.generic}</td>
                    <td>${med.strength}</td>
                    <td>${med.form}</td>
                    <td>${med.company}</td>
                    <td>৳${med.price.toFixed(2)}</td>
                    <td>
                        <span class="status-badge status-${med.status === 'Prescription' ? 'prescription' : 'otc'}">
                            ${med.status}
                        </span>
                    </td>
                    <td>${med.stock}</td>
                    <td>
                        <button class="action-btn edit-medicine" data-id="${med.brand}">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="action-btn delete-medicine" data-id="${med.brand}">
                            <i class="fas fa-trash"></i>
                        </button>
                        <button class="action-btn barcode-medicine" data-id="${med.brand}">
                            <i class="fas fa-barcode"></i>
                        </button>
                    </td>
                `;
                
                container.appendChild(row);
            });
        }

        // Update statistics
        function updateStatistics(medicines) {
            const total = medicines.length;
            const prescription = medicines.filter(m => m.status === 'Prescription').length;
            const otc = medicines.filter(m => m.status === 'Over-the-counter').length;
            
            // Get unique companies
            const companies = [...new Set(medicines.map(m => m.company))];
            
            document.getElementById('total-medicines').textContent = total;
            document.getElementById('prescription-count').textContent = prescription;
            document.getElementById('otc-count').textContent = otc;
            document.getElementById('company-count').textContent = companies.length;
        }

        // Initialize charts
        function initCharts(medicines) {
            // Prepare data for category chart
            const forms = ['Tablet', 'Capsule', 'Injection', 'Syrup'];
            const formCounts = forms.map(form => 
                medicines.filter(m => m.form === form).length
            );
            
            // Form distribution chart
            const formCtx = document.getElementById('categoryChart');
            if (formCtx) {
                new Chart(formCtx, {
                    type: 'doughnut',
                    data: {
                        labels: forms,
                        datasets: [{
                            data: formCounts,
                            backgroundColor: [
                                'rgba(0, 106, 78, 0.7)',
                                'rgba(231, 76, 60, 0.7)',
                                'rgba(243, 156, 18, 0.7)',
                                'rgba(155, 89, 182, 0.7)'
                            ],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'right'
                            },
                            title: {
                                display: true,
                                text: 'Medicine Form Distribution'
                            }
                        }
                    }
                });
            }
            
            // Sales chart
            const salesCtx = document.getElementById('salesChart');
            if (salesCtx) {
                new Chart(salesCtx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                        datasets: [{
                            label: 'Sales (৳)',
                            data: [125000, 142000, 138000, 156000, 162000, 175000],
                            borderColor: 'rgba(0, 106, 78, 1)',
                            backgroundColor: 'rgba(0, 106, 78, 0.1)',
                            tension: 0.3,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'Monthly Sales Trend'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value) {
                                        return '৳' + value.toLocaleString();
                                    }
                                }
                            }
                        }
                    }
                });
            }
        }

        // Setup filters
        function setupFilters(medicines) {
            // Company filter
            const companies = [...new Set(medicines.map(m => m.company))];
            const companySelect = document.getElementById('company');
            
            if (companySelect) {
                companies.forEach(company => {
                    const option = document.createElement('option');
                    option.value = company;
                    option.textContent = company;
                    companySelect.appendChild(option);
                });
            }
            
            // Add event listeners to filters
            const filters = ['company', 'form', 'status', 'stock'];
            filters.forEach(filterId => {
                const filter = document.getElementById(filterId);
                if (filter) {
                    filter.addEventListener('change', applyFilters);
                }
            });
            
            // Search input
            const searchInput = document.getElementById('search');
            if (searchInput) {
                searchInput.addEventListener('input', applyFilters);
            }
        }

        // Apply all filters
        function applyFilters() {
            const company = document.getElementById('company')?.value || '';
            const form = document.getElementById('form')?.value || '';
            const status = document.getElementById('status')?.value || '';
            const stock = document.getElementById('stock')?.value || '';
            const searchTerm = document.getElementById('search')?.value.toLowerCase() || '';
            
            const filtered = medicineData.filter(med => {
                // Search filter
                if (searchTerm && 
                    !med.brand.toLowerCase().includes(searchTerm) && 
                    !med.generic.toLowerCase().includes(searchTerm)) {
                    return false;
                }
                
                // Other filters
                if (company && med.company !== company) return false;
                if (form && med.form !== form) return false;
                if (status && med.status !== status) return false;
                
                // Stock filter
                if (stock === 'low' && med.stock >= 10) return false;
                if (stock === 'critical' && med.stock >= 5) return false;
                
                return true;
            });
            
            renderMedicineList(filtered);
        }

        // Update expiry notifications
        function updateExpiryNotifications(medicines) {
            const container = document.getElementById('expiry-notifications');
            if (!container) return;
            
            container.innerHTML = '';
            
            // Get medicines expiring in the next 60 days
            const today = new Date();
            const threshold = new Date();
            threshold.setDate(threshold.getDate() + 60);
            
            const expiringMedicines = medicines.filter(med => {
                const expiryDate = new Date(med.expiry);
                return expiryDate <= threshold && expiryDate >= today;
            });
            
            // Sort by closest expiry
            expiringMedicines.sort((a, b) => new Date(a.expiry) - new Date(b.expiry));
            
            // Take top 3
            const topExpiring = expiringMedicines.slice(0, 3);
            
            if (topExpiring.length === 0) {
                container.innerHTML = '<li class="notification-item"><div class="notification-content"><p>No expiring medicines in the next 60 days</p></div></li>';
                return;
            }
            
            topExpiring.forEach(med => {
                const expiryDate = new Date(med.expiry);
                const daysUntil = Math.ceil((expiryDate - today) / (1000 * 60 * 60 * 24));
                
                const item = document.createElement('li');
                item.className = daysUntil <= 30 ? 'notification-item notification-danger' : 'notification-item notification-warning';
                
                item.innerHTML = `
                    <div class="notification-icon">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div class="notification-content">
                        <h4>${med.brand} (${med.generic}) - ${med.strength}</h4>
                        <p>Expires in ${daysUntil} days - Batch: ${med.batchId}</p>
                    </div>
                `;
                
                container.appendChild(item);
            });
        }

        // Render patient list
        function renderPatientList(patients) {
            const container = document.getElementById('patient-list');
            if (!container) return;
            
            container.innerHTML = '';
            
            patients.forEach(patient => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${patient.id}</td>
                    <td>${patient.name}</td>
                    <td>${patient.phone}</td>
                    <td>${patient.age}</td>
                    <td>${patient.lastVisit}</td>
                    <td>${patient.prescriptions}</td>
                    <td>
                        <button class="action-btn view-patient" data-id="${patient.id}">
                            <i class="fas fa-eye"></i>
                        </button>
                        <button class="action-btn edit-patient" data-id="${patient.id}">
                            <i class="fas fa-edit"></i>
                        </button>
                    </td>
                `;
                
                container.appendChild(row);
            });
        }

        // Render sales list
        function renderSalesList(sales) {
            const container = document.getElementById('sales-list');
            if (!container) return;
            
            container.innerHTML = '';
            
            sales.forEach(sale => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${sale.id}</td>
                    <td>${sale.date}</td>
                    <td>${sale.customer}</td>
                    <td>${sale.items}</td>
                    <td>৳${sale.total.toFixed(2)}</td>
                    <td><span class="status-badge ${sale.status === 'Paid' ? 'status-otc' : 'status-prescription'}">${sale.status}</span></td>
                `;
                
                container.appendChild(row);
            });
        }

        // Render loan list
        function renderLoanList(loans) {
            const container = document.getElementById('loan-list');
            if (!container) return;
            
            container.innerHTML = '';
            
            loans.forEach(loan => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${loan.id}</td>
                    <td>${loan.customer}</td>
                    <td>${loan.issueDate}</td>
                    <td>${loan.dueDate}</td>
                    <td>${loan.items}</td>
                    <td>৳${loan.amount.toFixed(2)}</td>
                    <td><span class="status-badge ${loan.status === 'Active' ? 'status-otc' : 'status-prescription'}">${loan.status}</span></td>
                    <td>
                        <button class="action-btn return-loan" data-id="${loan.id}">
                            <i class="fas fa-undo"></i> Return
                        </button>
                    </td>
                `;
                
                container.appendChild(row);
            });
        }

        // Setup event listeners
        function setupEventListeners() {
            // Tab navigation
            const menuItems = document.querySelectorAll('.sidebar-menu li');
            if (menuItems.length > 0) {
                menuItems.forEach(item => {
                    item.addEventListener('click', function() {
                        // Update active tab
                        menuItems.forEach(i => i.classList.remove('active'));
                        this.classList.add('active');
                        
                        // Show selected tab content
                        const tab = this.getAttribute('data-tab');
                        document.querySelectorAll('.tab-content').forEach(t => {
                            if (t) t.classList.remove('active');
                        });
                        
                        const tabContent = document.getElementById(`${tab}-tab`);
                        if (tabContent) {
                            tabContent.classList.add('active');
                        }
                    });
                });
            }
            
            // Open medicine modal
            const addMedicineBtn = document.getElementById('add-medicine');
            if (addMedicineBtn) {
                addMedicineBtn.addEventListener('click', function() {
                    document.getElementById('modal-medicine-title').textContent = 'Add New Medicine';
                    document.getElementById('medicine-form').reset();
                    document.getElementById('medicine-modal').style.display = 'flex';
                });
            }
            
            // Close modals
            document.querySelectorAll('.close-modal, .btn-cancel').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.modal').forEach(modal => {
                        modal.style.display = 'none';
                    });
                });
            });
            
            // Save medicine
            const medicineForm = document.getElementById('medicine-form');
            if (medicineForm) {
                medicineForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const newMedicine = {
                        brand: document.getElementById('brand').value,
                        generic: document.getElementById('generic').value,
                        strength: document.getElementById('strength').value,
                        form: document.getElementById('form').value,
                        company: document.getElementById('company').value,
                        price: parseFloat(document.getElementById('price').value),
                        stock: parseInt(document.getElementById('stock').value),
                        status: document.getElementById('status').value,
                        expiry: document.getElementById('expiry').value,
                        batchId: document.getElementById('batch').value,
                        uses: document.getElementById('uses').value
                    };
                    
                    medicineData.push(newMedicine);
                    renderMedicineList(medicineData);
                    updateStatistics(medicineData);
                    updateExpiryNotifications(medicineData);
                    document.getElementById('medicine-modal').style.display = 'none';
                    
                    alert('Medicine added successfully!');
                });
            }
            
            // Export CSV
            const exportCsvBtn = document.getElementById('export-csv');
            if (exportCsvBtn) {
                exportCsvBtn.addEventListener('click', function() {
                    // Convert medicine data to CSV
                    const csv = Papa.unparse(medicineData);
                    
                    // Create download link
                    const blob = new Blob([csv], {type: 'text/csv;charset=utf-8;'});
                    const link = document.createElement("a");
                    const url = URL.createObjectURL(blob);
                    
                    link.setAttribute("href", url);
                    link.setAttribute("download", "medicine_inventory.csv");
                    link.style.visibility = 'hidden';
                    
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    
                    alert('CSV exported successfully!');
                });
            }
        }
    </script>
</body>
</html>